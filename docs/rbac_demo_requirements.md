# 需求文档：组件优先 (Component-First) RBAC 演示系统

## 1. 项目背景
本演示系统旨在展示一种改进的 RBAC 模型，重点解决传统 API 粒度权限在 UI 配置时的复杂性及“权限重叠导致无法精准移除”的问题。

## 2. 核心功能需求

### 2.1 角色定义与切换 (Role Selector)
- **需求描述**：系统应预设多种角色（Admin, Manager, Viewer, External Auditor），允许用户一键切换以观察不同身份下的 UI 表现。
- **功能点**：
    - 角色切换时，自动初始化该角色拥有的“组件清单”。
    - 状态实时同步到预览面板。

### 2.2 组件化授权 (Component-Based Authorization)
- **需求描述**：管理员通过勾选“业务组件”而非“API 路径”来分配权限。
- **功能点**：
    - **逻辑解耦**：每个组件绑定一个或多个 API 原子权限（如 `Member List` 对应 `GET /api/members`）。
    - **可视化反馈**：勾选组件时，应提示该组件背后关联的 API 权限。
    - **多对多关联**：支持多个组件复用同一个 API 权限。

### 2.3 实时业务模拟器 (Live Dashboard Simulator)
- **需求描述**：根据当前选中的组件清单，动态渲染业务界面。
- **功能点**：
    - **组件显隐**：仅当用户拥有对应组件代码时，该 UI 模块（Widget）才允许渲染。
    - **细粒度控制**：在组件内部，更小的功能模块（如“添加成员”按钮）应通过次级组件权限进一步控制。

### 2.4 后端状态扫描仪 (Backend Debug Console)
- **需求描述**：实时呈现系统内部的逻辑计算过程，验证模型正确性。
- **功能点**：
    - **组件清单统计**：列出当前生效的所有组件代码。
    - **权限自动聚合**：实时计算所有选中组件所涉及 API 权限的**并集**。
    - **重叠验证**：验证当 A、B 组件共享权限 P 时，仅移除 A 不会导致 P 消失，除非 B 也被移除（解决“僵尸权限”逻辑）。

## 3. 技术设计规范
- **前端框架**：Svelte 5 / SvelteKit。
- **UI 规范**：
    - 采用极简风格（Minimalist Native Dark）。
    - 统一使用中性灰色调（Zinc/Neutral），消除过度修饰。
    - 响应式布局，适配侧边配置栏与右侧预览区。
- **状态管理**：使用 Svelte 5 的私有状态（$state）进行实时响应，不依赖额外状态库。

## 4. 业务场景示例 (Team Workspace)
- **成员管理模块**：包含只读列表与编辑功能。
- **项目看板模块**：包含看板查看与任务归档。
- **审计日志模块**：展示高敏操作记录，并演示与“成员列表”共享 API 的场景。
